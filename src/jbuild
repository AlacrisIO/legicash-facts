;; jbuilder (dune) file for Legicash sources

(jbuild_version 1)

(library
 ((name legicash_lib)
  (modules (lib integer trie legibase data256 crypto keypair action
            ethereum_rlp ethereum_patricia_merkle ethereum_transaction ethereum_abi
            ethereum_util ethereum_rlp ethereum_json_rpc
            main_chain side_chain main_chain_action side_chain_action court_registry
            version))
  (preprocess (pps (ppx_deriving.std ppx_inline_test ppx_deriving_lens)))
  (libraries (cryptokit integers lens secp256k1 cohttp lwt cohttp-lwt-unix yojson))
  (inline_tests)))

;; main executable
(executable
  ((name hello_legicash)
   (preprocess (pps (ppx_deriving.std ppx_deriving_lens ppx_inline_test)))
   (modules (hello_legicash))
   (libraries (legicash_lib))))

;; custom toplevel
(executable
 ((name       legicaml)
  (modules (legicaml))
  (libraries  (compiler-libs.toplevel legicash_lib))
  (link_flags (-linkall -cclib -lintegers))
  (modes      (byte))))
